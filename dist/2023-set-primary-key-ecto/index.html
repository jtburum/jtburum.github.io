<!DOCTYPE html><html lang="en"><head><!-- sidebar vertical --><link rel="stylesheet" href="/_astro/2020-add-sitemap-to-phoenix-elixir-project.cdef5dff.css" />
<style>pre[data-astro-cid-xj2uyz6m]{padding:8px 16px;overflow:auto;border-radius:4px;background:#343434}code[data-astro-cid-xj2uyz6m]{padding:4px;border-radius:4px;background:#343434;font-family:Consolas,Monaco,Andale Mono,monospace;direction:ltr;font-size:14px}pre[data-astro-cid-xj2uyz6m]>code[data-astro-cid-xj2uyz6m]{padding:0;line-height:1.5;word-break:normal;white-space:pre;word-spacing:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4}
</style><script type="module" src="/_astro/hoisted.dd4aca48.js"></script></head><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-2976969447542443" data-ad-slot="1095168865" data-ad-format="auto" data-full-width-responsive="true"></ins><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2976969447542443" crossorigin="anonymous"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-2F7W0VSKYS"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-87340191-1"></script><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width"><link rel="sitemap" href="/sitemap.xml"><link rel="icon" type="image/x-icon" href="/images/favicon.ico"><!-- Primary Meta Tags --><title>How to set a primary key using Ecto</title><meta name="title" content="How to set a primary key using Ecto"><meta name="description" content="learn to override default primary keys ecto"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://howtocode.io"><meta property="og:title" content="How to set a primary key using Ecto"><meta property="og:description" content="learn to override default primary keys ecto"><meta property="og:image" content="/images/social.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://howtocode.io"><meta property="twitter:title" content="How to set a primary key using Ecto"><meta property="twitter:description" content="learn to override default primary keys ecto"><meta property="twitter:image" content="/images/social.jpg"><!-- Prism CSS --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism-tomorrow.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/plugins/toolbar/prism-toolbar.min.css"><!-- Fonts --><link href="https://fonts.googleapis.com/css2?family=Londrina+Solid:wght@900&family=Poppins:ital,wght@0,400;0,600;1,400;1,700&display=swap" rel="stylesheet"><nav><div class="max-w-5xl mx-auto px-3 py-3 flex items-center justify-between h-16"><a href="/" class="font-bold text-xl hover:text-hot-pink">DevDecks</a><a href="/search" class=""><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></a></div><div class="w-full border-b-2 border-black squiggle"></div></nav><main class="py-12 lg:py-20"><article class="max-w-5xl mx-auto px-3" data-astro-cid-xj2uyz6m><header class="mx-auto max-w-3xl text-center content" data-astro-cid-xj2uyz6m><h1 data-astro-cid-xj2uyz6m>How to set a primary key using Ecto</h1></header><!-- Image --><!-- YouTube Video --><!-- Content --><section class="max-w-3xl mx-auto py-6 lg:py-12 content" data-astro-cid-xj2uyz6m><p>I had some trouble getting this right and the information across the internet had varrying strategies that often didn’t include all of the details needed to get this right so hopefully this is the answer you’re looking for. In this example I use the primary key <code>:uuid</code>.</p>
<p>To start generate your migration file with <code>mix ecto.gen.migration organizations</code>. From there you will need to include two <code>primary_key</code> keyword list options. The first in the <code>table</code> function and the second in the <code>field</code> function. Example setup:</p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #e1e4e8">def change do</span></span>
<span class="line"><span style="color: #e1e4e8">  create table("organizations", primary_key: :false) do</span></span>
<span class="line"><span style="color: #e1e4e8">    add :name, :string</span></span>
<span class="line"><span style="color: #e1e4e8">    add :uuid, :binary_id, primary_key: :true</span></span>
<span class="line"><span style="color: #e1e4e8">  end</span></span>
<span class="line"><span style="color: #e1e4e8">end</span></span></code></pre>
<p>And then in your schema file at <code>lib/organization.ex</code> you will set the schema struct and use the module attributes <code>@primary_key</code> and <code>@foreign_key_type</code> to set the new primary key and foreign key (if needed) data.</p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #e1e4e8">@primary_key {:uuid, :binary_id, autogenerate: true}</span></span>
<span class="line"><span style="color: #e1e4e8">@foreign_key_type :binary_id</span></span>
<span class="line"><span style="color: #e1e4e8">schema "organizations" do</span></span>
<span class="line"><span style="color: #e1e4e8">  field :name, :string</span></span>
<span class="line"><span style="color: #e1e4e8">end</span></span></code></pre>
<p>Similar posts:</p>
<ul>
<li><a href="https://devdecks.io/2023-create-db-record-ecto">Create a new DB record using Ecto</a></li>
</ul></section></article></main></html>